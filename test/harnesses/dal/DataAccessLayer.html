<!-- file: test/harnesses/dal/DataAccessLayer.html (MODERNIZED) -->
<!DOCTYPE html>
<html lang="en">
<!-- ... (head and style sections are the same) ... -->
<body>

    <div class="main-panel">
        <h1>Test Runner for <code>DataAccessLayer.js</code></h1>
        <button id="run-tests-btn">Run All Tests</button>
        <div id="test-results"></div>
    </div>
    <div class="log-panel">
        <h2>Execution Log</h2>
        <pre id="log-output"></pre>
    </div>

    <!-- The magic happens here: We load a single "runner" script as a module -->
    <script type="module">
        // Import all the necessary components
        import { DataAccessLayer } from '/percussion-studio/src/dal/DataAccessLayer.js';
        import { runDalTests }      from '/percussion-studio/test/suites/dal/DataAccessLayer.test.js';
        import { TestRunner }       from '/percussion-studio/test/lib/TestRunner.js';
        import { MockLogger }       from '/percussion-studio/test/mocks/MockLogger.js';

        // Make classes available globally within this test harness for the tests to use
        // In a full application, this would not be necessary.
        window.DataAccessLayer = DataAccessLayer;
        window.MockLogger = MockLogger;

        document.getElementById('run-tests-btn').addEventListener('click', () => {
            const resultsContainer = document.getElementById('test-results');
            resultsContainer.innerHTML = '<h2>Running tests...</h2>';
            MockLogger.clearLogs();
            MockLogger.setLogTarget('log-output');

            const runner = new TestRunner();
            runDalTests(runner);
            runner.renderResults('test-results');
        });
    </script>
</body>
</html>